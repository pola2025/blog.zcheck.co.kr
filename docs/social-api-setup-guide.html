<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZCheck 소셜 미디어 API 설정 가이드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, 'Pretendard', system-ui, sans-serif; }
        code, pre { font-family: 'JetBrains Mono', 'Consolas', monospace; }
        .copy-btn { position: absolute; top: 8px; right: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: #94a3b8; padding: 4px 10px; border-radius: 6px; font-size: 12px; cursor: pointer; transition: all 0.2s; }
        .copy-btn:hover { background: rgba(255,255,255,0.2); color: #fff; }
        .copy-btn.copied { background: #10b981; color: #fff; border-color: #10b981; }
        .step-check:checked + label { text-decoration: line-through; opacity: 0.5; }
        .step-check:checked + label + .step-content { opacity: 0.5; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
<div class="max-w-3xl mx-auto px-6 py-12">

    <!-- Header -->
    <header class="mb-12">
        <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background: #13A9BA;">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/></svg>
            </div>
            <div>
                <h1 class="text-2xl font-bold">소셜 미디어 API 설정 가이드</h1>
                <p class="text-sm text-gray-500">ZCheck 콘텐츠 파이프라인 - Threads & Instagram API 토큰 발급</p>
            </div>
        </div>
        <div class="bg-amber-50 border border-amber-200 rounded-xl p-4">
            <p class="text-amber-800 text-sm"><strong>설정 완료 후</strong> <code class="bg-amber-100 px-1 rounded">F:\zcheck-content-pipeline\.env</code> 파일에 토큰을 추가하세요.</p>
        </div>
    </header>

    <!-- Part A: Threads API -->
    <section class="mb-16">
        <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
            <span class="w-8 h-8 bg-black text-white rounded-lg flex items-center justify-center text-sm font-bold">A</span>
            Threads API 토큰 발급
        </h2>

        <!-- Step 1 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="t1" class="step-check mt-1">
                <label for="t1" class="font-semibold cursor-pointer">Step 1: Meta 앱 생성</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm space-y-2">
                <ol class="space-y-2">
                    <li>1. <a href="https://developers.facebook.com/apps" target="_blank" class="text-blue-600 underline">developers.facebook.com/apps</a> 접속</li>
                    <li>2. <strong>Create App</strong> 클릭 &rarr; 앱 이름 입력 (예: "ZCheck Social")</li>
                    <li>3. Use Case: <strong>"Access the Threads API"</strong> 선택</li>
                    <li>4. 앱 생성 완료</li>
                </ol>
            </div>
        </div>

        <!-- Step 2 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="t2" class="step-check mt-1">
                <label for="t2" class="font-semibold cursor-pointer">Step 2: 권한(Permissions) 설정</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm space-y-2">
                <p><strong>Use Cases &rarr; Customize</strong>에서 다음 권한 추가:</p>
                <ul class="space-y-1">
                    <li><code class="bg-gray-100 px-2 py-0.5 rounded text-xs">threads_basic</code> - 자동 포함</li>
                    <li><code class="bg-gray-100 px-2 py-0.5 rounded text-xs">threads_content_publish</code> - <strong class="text-red-600">반드시 추가</strong></li>
                    <li><code class="bg-gray-100 px-2 py-0.5 rounded text-xs">threads_manage_insights</code> - 선택</li>
                </ul>
            </div>
        </div>

        <!-- Step 3 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="t3" class="step-check mt-1">
                <label for="t3" class="font-semibold cursor-pointer">Step 3: Redirect URI & 테스터 설정</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm space-y-2">
                <ol class="space-y-2">
                    <li>1. <strong>Settings</strong>에서 Redirect URI 추가: <code class="bg-gray-100 px-2 py-0.5 rounded text-xs">https://zcheck.co.kr/auth/callback</code></li>
                    <li>2. <strong>App Roles &rarr; Testers</strong>에서 Threads 사용자명 추가</li>
                    <li>3. <a href="https://www.threads.net/settings/account" target="_blank" class="text-blue-600 underline">threads.net/settings/account</a>에서 초대 수락</li>
                    <li>4. <strong>"Finish customization"</strong> &rarr; <strong>"Yes I'm finished"</strong> 클릭</li>
                </ol>
            </div>
        </div>

        <!-- Step 4 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="t4" class="step-check mt-1">
                <label for="t4" class="font-semibold cursor-pointer">Step 4: App ID & Secret 확인</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm space-y-2">
                <p><strong>Use Cases &rarr; Customize &rarr; Settings</strong>에서 확인:</p>
                <div class="bg-gray-50 rounded-lg p-3 font-mono text-sm">
                    <div><span class="text-gray-500">Threads App ID:</span> <span class="text-blue-600">[여기에 표시됨]</span></div>
                    <div><span class="text-gray-500">Threads App Secret:</span> <span class="text-blue-600">[여기에 표시됨]</span></div>
                </div>
            </div>
        </div>

        <!-- Step 5 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="t5" class="step-check mt-1">
                <label for="t5" class="font-semibold cursor-pointer">Step 5: Access Token 발급</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm space-y-3">
                <p><strong>1. 인증 URL 접속</strong> (아래 URL에서 {APP_ID}와 {CALLBACK_URL}을 교체):</p>
                <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-xs overflow-x-auto">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>https://threads.net/oauth/authorize?client_id={APP_ID}&redirect_uri={CALLBACK_URL}&scope=threads_basic,threads_content_publish&response_type=code</pre>
                </div>

                <p><strong>2. 리다이렉트된 URL에서 code 파라미터 복사</strong></p>
                <p class="text-gray-400 text-xs">예: https://zcheck.co.kr/auth/callback?code=<span class="text-green-600">AQB...</span></p>

                <p><strong>3. Short-lived Token 교환</strong>:</p>
                <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-xs overflow-x-auto">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>curl -X POST https://graph.threads.net/oauth/access_token \
  -F client_id={APP_ID} \
  -F client_secret={APP_SECRET} \
  -F grant_type=authorization_code \
  -F redirect_uri={CALLBACK_URL} \
  -F code={AUTH_CODE}</pre>
                </div>

                <p><strong>4. Long-lived Token 교환</strong> (60일 유효):</p>
                <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-xs overflow-x-auto">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>curl "https://graph.threads.net/access_token?grant_type=th_exchange_token&client_secret={APP_SECRET}&access_token={SHORT_LIVED_TOKEN}"</pre>
                </div>

                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                    <p class="text-blue-800 text-xs"><strong>응답에서 2개 값 기록:</strong></p>
                    <ul class="text-blue-700 text-xs mt-1">
                        <li>- <code>access_token</code> &rarr; THREADS_ACCESS_TOKEN</li>
                        <li>- <code>user_id</code> &rarr; THREADS_USER_ID (Short-lived 응답에서 확인)</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Part B: Instagram API -->
    <section class="mb-16">
        <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
            <span class="w-8 h-8 bg-gradient-to-br from-purple-600 to-pink-500 text-white rounded-lg flex items-center justify-center text-sm font-bold">B</span>
            Instagram Graph API 토큰 발급
        </h2>

        <div class="bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4">
            <p class="text-amber-800 text-sm"><strong>사전 조건:</strong> Instagram Business 또는 Creator 계정 필요 + Facebook 페이지 연결</p>
        </div>

        <!-- Step 1 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="i1" class="step-check mt-1">
                <label for="i1" class="font-semibold cursor-pointer">Step 1: Instagram Business 계정 전환</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm">
                <ol class="space-y-1">
                    <li>1. Instagram 앱 &rarr; 설정 &rarr; 계정 유형 및 도구 &rarr; <strong>비즈니스로 전환</strong></li>
                    <li>2. Facebook 페이지 연결 (없으면 새로 생성)</li>
                </ol>
            </div>
        </div>

        <!-- Step 2 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="i2" class="step-check mt-1">
                <label for="i2" class="font-semibold cursor-pointer">Step 2: Facebook 앱에 Instagram 추가</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm">
                <ol class="space-y-1">
                    <li>1. <a href="https://developers.facebook.com/apps" target="_blank" class="text-blue-600 underline">developers.facebook.com/apps</a>에서 기존 앱 또는 새 앱</li>
                    <li>2. <strong>Add Product</strong> &rarr; <strong>Instagram Graph API</strong> 추가</li>
                    <li>3. <strong>Settings &rarr; Basic</strong>에서 App ID, App Secret 확인</li>
                </ol>
            </div>
        </div>

        <!-- Step 3 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="i3" class="step-check mt-1">
                <label for="i3" class="font-semibold cursor-pointer">Step 3: 토큰 발급 (Graph API Explorer)</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm space-y-2">
                <ol class="space-y-2">
                    <li>1. <a href="https://developers.facebook.com/tools/explorer/" target="_blank" class="text-blue-600 underline">Graph API Explorer</a> 접속</li>
                    <li>2. 앱 선택 &rarr; <strong>Generate Access Token</strong></li>
                    <li>3. 권한 추가: <code class="bg-gray-100 px-1 rounded text-xs">instagram_basic</code>, <code class="bg-gray-100 px-1 rounded text-xs">instagram_content_publish</code>, <code class="bg-gray-100 px-1 rounded text-xs">pages_show_list</code></li>
                    <li>4. 토큰 발급 &rarr; 인증 완료</li>
                </ol>
            </div>
        </div>

        <!-- Step 4 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="i4" class="step-check mt-1">
                <label for="i4" class="font-semibold cursor-pointer">Step 4: Instagram User ID 확인</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm space-y-2">
                <p>발급받은 토큰으로 Instagram User ID 조회:</p>
                <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-xs overflow-x-auto">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>curl "https://graph.facebook.com/v21.0/me/accounts?access_token={TOKEN}"
# Page ID 확인 후:
curl "https://graph.facebook.com/v21.0/{PAGE_ID}?fields=instagram_business_account&access_token={TOKEN}"</pre>
                </div>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                    <p class="text-blue-800 text-xs"><strong>응답에서 기록:</strong></p>
                    <ul class="text-blue-700 text-xs mt-1">
                        <li>- <code>instagram_business_account.id</code> &rarr; IG_USER_ID</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Step 5 -->
        <div class="bg-white rounded-xl border border-gray-200 p-6 mb-4">
            <div class="flex items-start gap-3">
                <input type="checkbox" id="i5" class="step-check mt-1">
                <label for="i5" class="font-semibold cursor-pointer">Step 5: Long-lived Token 교환</label>
            </div>
            <div class="step-content ml-7 mt-3 text-gray-600 text-sm space-y-2">
                <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-xs overflow-x-auto">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>curl "https://graph.facebook.com/v21.0/oauth/access_token?grant_type=fb_exchange_token&client_id={APP_ID}&client_secret={APP_SECRET}&fb_exchange_token={SHORT_TOKEN}"</pre>
                </div>
                <p class="text-xs text-gray-500">Long-lived 토큰은 60일간 유효. 만료 전 갱신 필요.</p>
            </div>
        </div>
    </section>

    <!-- Part C: .env 설정 -->
    <section class="mb-16">
        <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
            <span class="w-8 h-8 bg-green-600 text-white rounded-lg flex items-center justify-center text-sm font-bold">C</span>
            .env 파일에 토큰 추가
        </h2>

        <div class="bg-white rounded-xl border border-gray-200 p-6">
            <p class="text-gray-600 text-sm mb-4">아래 내용을 <code class="bg-gray-100 px-2 py-0.5 rounded text-xs">F:\zcheck-content-pipeline\.env</code> 파일에 추가:</p>

            <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-sm overflow-x-auto">
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <pre id="env-template"># Threads API
THREADS_ACCESS_TOKEN=<span class="text-green-400" contenteditable="true" id="threads-token">[여기에 토큰 입력]</span>
THREADS_USER_ID=<span class="text-green-400" contenteditable="true" id="threads-uid">[여기에 USER_ID 입력]</span>

# Instagram Graph API
IG_ACCESS_TOKEN=<span class="text-green-400" contenteditable="true" id="ig-token">[여기에 토큰 입력]</span>
IG_USER_ID=<span class="text-green-400" contenteditable="true" id="ig-uid">[여기에 USER_ID 입력]</span></pre>
            </div>
        </div>
    </section>

    <!-- Part D: 테스트 -->
    <section class="mb-16">
        <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
            <span class="w-8 h-8 bg-purple-600 text-white rounded-lg flex items-center justify-center text-sm font-bold">D</span>
            연동 테스트
        </h2>

        <div class="bg-white rounded-xl border border-gray-200 p-6 space-y-4">
            <div>
                <h3 class="font-semibold mb-2">Threads 미리보기</h3>
                <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-xs overflow-x-auto">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>cd F:\zipcheck_blog
node scripts/publish-threads.js content/remodeling-checklist-2026.json --dry-run</pre>
                </div>
            </div>

            <div>
                <h3 class="font-semibold mb-2">Instagram 미리보기</h3>
                <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-xs overflow-x-auto">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>node scripts/publish-instagram.js content/remodeling-checklist-2026.json --dry-run</pre>
                </div>
            </div>

            <div>
                <h3 class="font-semibold mb-2">전체 파이프라인 미리보기</h3>
                <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-xs overflow-x-auto">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>node scripts/pipeline.js content/remodeling-checklist-2026.json --dry-run</pre>
                </div>
            </div>

            <div>
                <h3 class="font-semibold mb-2">실제 발행 (주의!)</h3>
                <div class="relative bg-gray-900 text-gray-100 rounded-lg p-4 text-xs overflow-x-auto">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>node scripts/pipeline.js content/remodeling-checklist-2026.json</pre>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="text-center text-gray-400 text-sm py-8 border-t border-gray-200">
        <p>ZCheck 콘텐츠 파이프라인 &middot; 2026</p>
        <p class="mt-1">Threads API 상세: <a href="file:///C:/Users/flame/docs/threads-api-guide.html" class="text-blue-500 underline">threads-api-guide.html</a></p>
    </footer>
</div>

<script>
function copyCode(btn) {
    const pre = btn.parentElement.querySelector('pre');
    const text = pre.textContent || pre.innerText;
    navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'Copied!';
        btn.classList.add('copied');
        setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
    });
}
</script>
</body>
</html>
